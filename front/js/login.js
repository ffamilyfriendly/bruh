function login() { const email = $("#email").val(), password = $("#password").val(); $.ajax({ type: "POST", url: "/api/login", data: { email: email, password: password }, success: data => { $("#login_form").prepend(`<div class="login_success">${data.data}</div>`); const url = new URL(window.location.href); let c = url.searchParams.has("redirect") ? decodeURIComponent(url.searchParams.get("redirect")) : "/home"; window.location = c }, error: err => { $("#login_form").prepend(`<div class="login_error">${err.responseJSON.data}</div>`) } }) } function register() { const email = $("#email").val(), password = $("#password").val(); $.ajax({ type: "POST", url: "/api/register", data: { email: email, password: password }, success: data => { $("#login_form").prepend(`<div class="login_success">${data.data}</div>`), login() }, error: err => { $("#login_form").prepend(`<div class="login_error">${err.responseJSON.data}</div>`) } }) }