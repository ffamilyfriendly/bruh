const parseCookies=cs=>Object.fromEntries(cs.split("; ").map(x=>x.split("="))),cookieEncode=val=>"string"==typeof val?val.replace(/\=/g,"*"):val,cookieDecode=val=>"string"==typeof val?val.replace(/\*/g,"="):val;window.setting={set:(key,value)=>{if(window.setting.exists("cookies")||(document.cookie="cookies=false; max-age=31536000;"),"cookies"!==key&&"false"===parseCookies(document.cookie).cookies)throw new Error("cookies forbidden");document.cookie=`=${cookieEncode(value)}; max-age=31536000;`},exists:key=>{const settings=parseCookies(document.cookie);return void 0!==settings[key]},remove:key=>{document.cookie=`=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`},get:key=>key?cookieDecode(parseCookies(document.cookie)[key]):parseCookies(document.cookie)},window.popup=(type,data)=>{const html=`<div class="centerDiv popup popup-">\n    <h1 class="center"></h1>\n    <p></p>\n    <button onclick='$(this).parent().remove()'>Dismiss</button>\n    </div>`;$("body").prepend(html)},$(document).ready(()=>{window.setting.exists("cookies")&&"false"!=window.setting.get("cookies")||$("body").prepend('<div id="cookie_header" class="banner center"><span id="notice-text">this site uses cookies to store settings. By continuing to use the site you agree to the <a href="/terms">Terms of service</a></span><hr class="mobile"><button onclick="window.setting.set(\'cookies\',true); $(\'#cookie_header\').remove()" id="btn-dismiss" class="btn-yellow">dismiss</button></div>')}),window.onerror=err=>{window.popup("error",`<br><a class="btn-red" href="https://stackoverflow.com/search?q=">Stack overflow</a>`)};